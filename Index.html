<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owner Builder Cost Estimator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #f97316;
            --light: #f8fafc;
            --dark: #0f172a;
            --gray: #64748b;
            --light-gray: #e2e8f0;
            --success: #10b981;
            --border: 1px solid #cbd5e1;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 8px;
            --font-family: 'Inter', sans-serif;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-family);
        }
        
        body {
            background-color: #f1f5f9;
            color: var(--dark);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 2rem;
            text-align: center;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
            overflow: hidden;
            position: relative;
        }
        
        header h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        header p {
            font-size: 1rem;
            max-width: 700px;
            margin: 0.5rem auto 0;
            opacity: 0.9;
        }
        
        .app-container {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        
        .form-container,
        .results-container {
            flex: 1;
            min-width: 280px;
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            position: relative;
            z-index: 10;
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
                gap: 1.5rem;
            }
            header h1 {
                font-size: 1.8rem;
            }
            header p {
                font-size: 0.9rem;
            }
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            margin-bottom: 1.2rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-gray);
            font-weight: 600;
            color: var(--primary-dark);
        }
        
        .section-title i {
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.4rem;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
        }
        
        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 0.7rem;
            border: var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            background-color: var(--light);
            transition: border-color 0.2s, box-shadow 0.2s;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.25);
        }
        
        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 1.2rem;
        }
        
        .input-group .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 0.5rem;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: var(--border);
            accent-color: var(--primary);
            cursor: pointer;
            display: inline-block;
            flex-shrink: 0;
            pointer-events: auto; /* Ensure clickable */
        }

        .checkbox-item label {
            margin-bottom: 0;
            cursor: pointer;
            font-size: 0.95rem;
            color: var(--gray);
            font-weight: 400;
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.9rem 1.5rem;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s, transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin-top: 1.5rem;
            box-shadow: var(--shadow);
        }
        
        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }
        
        .btn i {
            margin-right: 10px;
        }
        
        .summary-box {
            background: var(--light);
            padding: 1.5rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            border: 1px solid var(--light-gray);
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px dashed var(--light-gray);
            font-size: 1rem;
        }
        
        .summary-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .summary-item span:first-child {
            color: var(--gray);
        }

        .summary-item span:last-child {
            font-weight: 600;
            color: var(--dark);
        }
        
        .total-cost {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary);
            text-align: center;
            margin: 1.5rem 0 0.5rem;
        }
        
        .cost-per-sqm {
            text-align: center;
            color: var(--gray);
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 1.5rem;
            padding: 1rem;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        .cost-breakdown {
            margin-top: 2rem;
        }
        
        .breakdown-item {
            margin-bottom: 1.2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
            font-size: 0.95rem;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }
        
        .breakdown-item > div:first-child {
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 0.5rem;
        }

        .breakdown-item .summary-item {
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 0.5rem;
        }
        
        .progress-bar {
            height: 8px;
            background: var(--light-gray);
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
            transition: width 0.5s ease-out;
        }
        
        .disclaimer {
            background: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 1rem;
            margin-top: 2rem;
            border-radius: 4px;
            font-size: 0.9rem;
            color: #b45309;
        }
        
        .disclaimer strong {
            color: #92400e;
        }
        
        .area-toggle {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
            gap: 15px;
        }
        
        .toggle-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .toggle-option input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }
        
        .toggle-option label {
            margin-bottom: 0;
            font-size: 0.95rem;
            color: var(--gray);
        }
        
        /* Removed .feature-grid and .feature-option specific styles as they are replaced by dropdowns */
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        header h1, header p {
            animation: fadeInDown 0.6s ease-out forwards;
        }
        header p {
            animation-delay: 0.2s;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-calculator"></i> Owner Builder Cost Estimator</h1>
            <p>Estimate your construction costs based on project specifications and current market rates</p>
        </header>
        
        <div class="app-container">
            <!-- Left section: Form for project specifications -->
            <div class="form-container">
                <div class="section-title">
                    <i class="fas fa-home"></i>
                    <h2>Project Specifications</h2>
                </div>
                
                <form id="cost-estimator-form">
                    <!-- Input group for total area and property type -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="total-area">Total Area</label>
                            <input type="number" id="total-area" min="50" max="1000" value="200" aria-label="Total Area" onchange="calculateEstimate()">
                            <div class="area-toggle">
                                <div class="toggle-option">
                                    <input type="radio" id="unit-sqm" name="area-unit" value="sqm" checked onchange="calculateEstimate()">
                                    <label for="unit-sqm">Square Meters (sqm)</label>
                                </div>
                                <div class="toggle-option">
                                    <input type="radio" id="unit-squares" name="area-unit" value="squares" onchange="calculateEstimate()">
                                    <label for="unit-squares">Squares (1 sq = 9.29 sqm)</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="property-type">Property Type</label>
                            <select id="property-type" aria-label="Property Type" onchange="calculateEstimate()">
                                <option value="house">House</option>
                                <option value="townhouse">Townhouse</option>
                                <option value="apartment">Apartment</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Input group for floors and garage -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="floors">Floors</label>
                            <select id="floors" aria-label="Number of Floors" onchange="calculateEstimate()">
                                <option value="1">Single Floor</option>
                                <option value="2">Duplex</option>
                                <option value="3">Triplex</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="garage">Garage</label>
                            <select id="garage" aria-label="Garage type" onchange="calculateEstimate()">
                                <option value="0">None</option>
                                <option value="1" selected>Single</option>
                                <option value="2">Double</option>
                                <option value="3">Triple</option>
                            </select>
                        </div>
                    </div>

                    <!-- Building Style -->
                    <div class="form-group">
                        <label for="building-style">Building Style</label>
                        <select id="building-style" aria-label="Building Style" onchange="calculateEstimate()">
                            <option value="modern">Modern</option>
                            <option value="traditional">Traditional</option>
                            <option value="contemporary" selected>Contemporary</option>
                            <option value="hamptons">Hamptons</option>
                            <option value="farmhouse">Farmhouse</option>
                        </select>
                    </div>
                    
                    <div class="section-title">
                        <i class="fas fa-door-open"></i>
                        <h2>Rooms & Spaces</h2>
                    </div>
                    
                    <!-- Input group for bedrooms and bathrooms -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="bedrooms">Bedrooms</label>
                            <input type="number" id="bedrooms" min="1" max="10" value="3" aria-label="Number of Bedrooms" onchange="calculateEstimate()">
                        </div>
                        <div class="form-group">
                            <label for="bathrooms">Bathrooms</label>
                            <input type="number" id="bathrooms" min="1" max="6" value="2" aria-label="Number of Bathrooms" onchange="calculateEstimate()">
                        </div>
                    </div>
                    
                    <!-- Input group for kitchens and living areas -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="kitchens">Kitchens</label>
                            <input type="number" id="kitchens" min="1" max="3" value="1" aria-label="Number of Kitchens" onchange="calculateEstimate()">
                        </div>
                        <div class="form-group">
                            <label for="living-areas">Living Areas</label>
                            <input type="number" id="living-areas" min="1" max="5" value="1" aria-label="Number of Living Areas" onchange="calculateEstimate()">
                        </div>
                    </div>
                    
                    <!-- Checkbox group for additional rooms -->
                    <div class="form-group">
                        <label>Additional Rooms</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="alfresco" checked aria-label="Include Alfresco" onchange="calculateEstimate()">
                                <label for="alfresco">Alfresco</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="theatre" aria-label="Include Theatre Room" onchange="calculateEstimate()">
                                <label for="theatre">Theatre Room</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="office" aria-label="Include Office" onchange="calculateEstimate()">
                                <label for="office">Office</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="prayer" aria-label="Include Prayer Room" onchange="calculateEstimate()">
                                <label for="prayer">Prayer Room</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="laundry" checked aria-label="Include Laundry" onchange="calculateEstimate()">
                                <label for="laundry">Laundry</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="study" aria-label="Include Study" onchange="calculateEstimate()">
                                <label for="study">Study</label>
                            </div>
                            <!-- Built-in Wardrobes -->
                            <div class="checkbox-item">
                                <input type="checkbox" id="builtin-wardrobes" checked aria-label="Include Built-in Wardrobes" onchange="calculateEstimate()">
                                <label for="builtin-wardrobes">Built-in Wardrobes</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-title">
                        <i class="fas fa-paint-roller"></i>
                        <h2>Materials & Finishes</h2>
                    </div>
                    
                    <!-- Input group for flooring and roof type -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="flooring">Flooring</label>
                            <select id="flooring" aria-label="Flooring type" onchange="calculateEstimate()">
                                <option value="standard">Standard Carpet</option>
                                <option value="premium">Premium Carpet</option>
                                <option value="tiles">Tiles</option>
                                <option value="hardwood">Hardwood</option>
                                <option value="laminate">Laminate</option>
                                <option value="vinyl">Vinyl Plank</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="roof">Roof Type</label>
                            <select id="roof" aria-label="Roof type" onchange="calculateEstimate()">
                                <option value="concrete">Concrete Tiles</option>
                                <option value="metal">Metal</option>
                                <option value="terracotta">Terracotta</option>
                                <option value="slate">Slate</option>
                                <option value="shingle">Asphalt Shingle</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Input group for ceiling height and insulation -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="ceiling">Ceiling Height</label>
                            <select id="ceiling" aria-label="Ceiling Height" onchange="calculateEstimate()">
                                <option value="standard">Standard (2.4m)</option>
                                <option value="high">High (2.7m)</option>
                                <option value="vaulted">Vaulted (3m+)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="insulation">Insulation</label>
                            <select id="insulation" aria-label="Insulation level" onchange="calculateEstimate()">
                                <option value="basic">Basic</option>
                                <option value="standard" selected>Standard</option>
                                <option value="premium">Premium</option>
                                <option value="high-performance">High Performance</option>
                            </select>
                        </div>
                    </div>

                    <div class="section-title">
                        <i class="fas fa-bolt"></i>
                        <h2>Energy Efficiency</h2>
                    </div>
                    <!-- Energy Efficiency -->
                    <div class="form-group">
                        <label>Energy Efficiency Features</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="double-glazing" aria-label="Include Double Glazing" onchange="calculateEstimate()">
                                <label for="double-glazing">Double Glazing</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="solar-panels" aria-label="Include Solar Panels" onchange="calculateEstimate()">
                                <label for="solar-panels">Solar Panels</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="rainwater-harvesting" aria-label="Include Rainwater Harvesting" onchange="calculateEstimate()">
                                <label for="rainwater-harvesting">Rainwater Harvesting</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="smart-thermostat" aria-label="Include Smart Thermostat" onchange="calculateEstimate()">
                                <label for="smart-thermostat">Smart Thermostat</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-title">
                        <i class="fas fa-utensils"></i>
                        <h2>Kitchen Features</h2>
                    </div>
                    
                    <!-- Kitchen cabinet materials -->
                    <div class="form-group">
                        <label for="cabinet-material">Cabinet Material</label>
                        <select id="cabinet-material" aria-label="Cabinet Material" onchange="calculateEstimate()">
                            <option value="laminate">Laminate ($0 premium)</option>
                            <option value="thermofoil">Thermofoil (+$1500)</option>
                            <option value="wood">Solid Wood (+$3000)</option>
                            <option value="painted">Painted MDF (+$2500)</option>
                        </select>
                    </div>
                    
                    <!-- Kitchen countertops -->
                    <div class="form-group">
                        <label for="countertop">Countertops</label>
                        <select id="countertop" aria-label="Countertop Type" onchange="calculateEstimate()">
                            <option value="laminate">Laminate ($0 premium)</option>
                            <option value="quartz">Quartz (+$2000)</option>
                            <option value="granite">Granite (+$3500)</option>
                            <option value="marble">Marble (+$4500)</option>
                        </select>
                    </div>
                    
                    <!-- Kitchen features checkboxes -->
                    <div class="form-group">
                        <label>Kitchen Features</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="island" checked aria-label="Include Island Bench" onchange="calculateEstimate()">
                                <label for="island">Island Bench</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="pantry" aria-label="Include Walk-in Pantry" onchange="calculateEstimate()">
                                <label for="pantry">Walk-in Pantry</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="breakfast-bar" aria-label="Include Breakfast Bar" onchange="calculateEstimate()">
                                <label for="breakfast-bar">Breakfast Bar</label>
                            </div>
                        </div>
                    </div>

                    <!-- Appliances -->
                    <div class="form-group">
                        <label for="appliances">Appliances Package</label>
                        <select id="appliances" aria-label="Appliances Package" onchange="calculateEstimate()">
                            <option value="standard">Standard ($0 premium)</option>
                            <option value="premium">Premium (+$5000)</option>
                            <option value="luxury">Luxury (+$12000)</option>
                        </select>
                    </div>
                    
                    <div class="section-title">
                        <i class="fas fa-bath"></i>
                        <h2>Bathroom Features</h2>
                    </div>
                    
                    <!-- Shower Options -->
                    <div class="form-group">
                        <label for="shower">Shower Options</label>
                        <select id="shower" aria-label="Shower Option" onchange="calculateEstimate()">
                            <option value="standard">Standard ($0 premium)</option>
                            <option value="frameless">Frameless (+$800)</option>
                            <option value="walk-in">Walk-in (+$1200)</option>
                        </select>
                    </div>
                    
                    <!-- Vanity Options -->
                    <div class="form-group">
                        <label for="vanity">Vanity Options</label>
                        <select id="vanity" aria-label="Vanity Option" onchange="calculateEstimate()">
                            <option value="standard">Standard ($0 premium)</option>
                            <option value="floating">Floating (+$600)</option>
                            <option value="double">Double Sink (+$1000)</option>
                        </select>
                    </div>
                    
                    <!-- Bathroom features checkboxes -->
                    <div class="form-group">
                        <label>Bathroom Features</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="full-height-tiles" aria-label="Include Full Height Tiles" onchange="calculateEstimate()">
                                <label for="full-height-tiles">Full Height Tiles</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="heated-floor" aria-label="Include Heated Floor" onchange="calculateEstimate()">
                                <label for="heated-floor">Heated Floor</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="steam-shower" aria-label="Include Steam Shower" onchange="calculateEstimate()">
                                <label for="steam-shower">Steam Shower</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="freestanding-bath" aria-label="Include Freestanding Bath" onchange="calculateEstimate()">
                                <label for="freestanding-bath">Freestanding Bath</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-title">
                        <i class="fas fa-wind"></i>
                        <h2>Systems & Exterior</h2>
                    </div>
                    
                    <!-- Input group for heating and cooling systems -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="heating">Heating System</label>
                            <select id="heating" aria-label="Heating System type" onchange="calculateEstimate()">
                                <option value="none">None</option>
                                <option value="split">Split System</option>
                                <option value="ducted" selected>Ducted Heating</option>
                                <option value="hydronic">Hydronic Heating</option>
                                <option value="geothermal">Geothermal</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cooling">Cooling System</label>
                            <select id="cooling" aria-label="Cooling System type" onchange="calculateEstimate()">
                                <option value="none">None</option>
                                <option value="split" selected>Split System</option>
                                <option value="ducted">Ducted Cooling</option>
                                <option value="evap">Evaporative Cooling</option>
                                <option value="central">Central AC</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Input group for landscaping and driveway -->
                    <div class="input-group">
                        <div class="form-group">
                            <label for="landscape">Landscaping</label>
                            <select id="landscape" aria-label="Landscaping level" onchange="calculateEstimate()">
                                <option value="none">None</option>
                                <option value="basic" selected>Basic</option>
                                <option value="premium">Premium</option>
                                <option value="luxury">Luxury</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="driveway">Driveway</label>
                            <select id="driveway" aria-label="Driveway type" onchange="calculateEstimate()">
                                <option value="gravel">Gravel</option>
                                <option value="asphalt">Asphalt</option>
                                <option value="concrete" selected>Concrete</option>
                                <option value="pavers">Pavers</option>
                                <option value="exposed-aggregate">Exposed Aggregate</option>
                            </select>
                        </div>
                    </div>

                    <div class="section-title">
                        <i class="fas fa-tools"></i>
                        <h2>Site Works</h2>
                    </div>
                    <!-- Site Works -->
                    <div class="form-group">
                        <label>Site Preparation & Services</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="excavation" aria-label="Include Excavation" onchange="calculateEstimate()">
                                <label for="excavation">Basic Excavation</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="drainage" aria-label="Include Drainage" onchange="calculateEstimate()">
                                <label for="drainage">Drainage System</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="service-connections" checked aria-label="Include Service Connections" onchange="calculateEstimate()">
                                <label for="service-connections">Utility Connections</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="retaining-walls" aria-label="Include Retaining Walls" onchange="calculateEstimate()">
                                <label for="retaining-walls">Retaining Walls</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calculate button - kept for explicit calculation if needed -->
                    <button type="button" id="calculate-btn" class="btn">
                        <i class="fas fa-calculator"></i> Calculate Estimate
                    </button>
                </form>
            </div>
            
            <!-- Right section: Cost estimate results and breakdown -->
            <div class="results-container">
                <div class="section-title">
                    <i class="fas fa-chart-bar"></i>
                    <h2>Cost Estimate</h2>
                </div>
                
                <!-- Summary of major cost categories -->
                <div class="summary-box">
                    <div class="summary-item">
                        <span>Construction Cost:</span>
                        <span id="construction-cost">$0</span>
                    </div>
                    <div class="summary-item">
                        <span>Finishes & Materials:</span>
                        <span id="finishes-cost">$0</span>
                    </div>
                    <div class="summary-item">
                        <span>Systems & Utilities:</span>
                        <span id="systems-cost">$0</span>
                    </div>
                    <div class="summary-item">
                        <span>Exterior & Landscape:</span>
                        <span id="exterior-cost">$0</span>
                    </div>
                    <div class="summary-item">
                        <span>Additional Features:</span>
                        <span id="features-cost">$0</span>
                    </div>
                </div>
                
                <!-- Total cost and cost per sqm -->
                <div class="total-cost" id="total-cost">$0</div>
                <div class="cost-per-sqm" id="cost-per-sqm">$0 per sqm</div>
                
                <!-- Chart for visual cost breakdown -->
                <div class="chart-container">
                    <canvas id="cost-chart"></canvas>
                </div>
                
                <!-- Detailed cost breakdown with progress bars -->
                <div class="cost-breakdown">
                    <div class="section-title">
                        <i class="fas fa-list"></i>
                        <h2>Cost Breakdown</h2>
                    </div>
                    
                    <div class="breakdown-item">
                        <div>Structure & Frame</div>
                        <div class="summary-item">
                            <span id="frame-percent">0%</span>
                            <span id="frame-cost">$0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="frame-progress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="breakdown-item">
                        <div>Roofing</div>
                        <div class="summary-item">
                            <span id="roof-percent">0%</span>
                            <span id="roof-cost">$0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="roof-progress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="breakdown-item">
                        <div>Interiors & Finishes</div>
                        <div class="summary-item">
                            <span id="interior-percent">0%</span>
                            <span id="interior-cost">$0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="interior-progress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="breakdown-item">
                        <div>Kitchen & Bathrooms</div>
                        <div class="summary-item">
                            <span id="kitchen-percent">0%</span>
                            <span id="kitchen-cost">$0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="kitchen-progress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="breakdown-item">
                        <div>Systems & Utilities</div>
                        <div class="summary-item">
                            <span id="utilities-percent">0%</span>
                            <span id="utilities-cost">$0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="utilities-progress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="breakdown-item">
                        <div>Exterior & Site Works</div>
                        <div class="summary-item">
                            <span id="exterior-percent">0%</span>
                            <span id="exterior-breakdown-cost">$0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="exterior-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Disclaimer for the estimate -->
                <div class="disclaimer">
                    <p><strong>Disclaimer:</strong> This estimate is based on current market rates and typical construction costs. Actual costs may vary based on location, material availability, labor rates, and project complexity. Always consult with professionals before starting your project.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Define market rates and cost parameters for calculations
        const marketRates = {
            baseCostPerSqm: 1800,
            duplexPremium: 0.15,
            townhouseDiscount: 0.1,
            apartmentDiscount: 0.15,
            
            // Fixed costs for different rooms
            bedroomCost: 8000,
            bathroomCost: 15000,
            kitchenCost: 20000,
            livingAreaCost: 10000,
            alfrescoCost: 8000,
            theatreCost: 12000,
            officeCost: 7000,
            prayerRoomCost: 5000,
            laundryCost: 6000,
            studyCost: 5000,
            builtinWardrobe: 2500, // Cost for built-in wardrobes per bedroom

            // Garage costs based on type
            singleGarage: 15000,
            doubleGarage: 25000,
            tripleGarage: 35000,
            
            // Building style multipliers
            buildingStyle: {
                modern: 1.05,
                traditional: 1.00,
                contemporary: 1.10, // Higher premium for contemporary design
                hamptons: 1.20,     // Higher premium for Hamptons style
                farmhouse: 1.15
            },

            // Per square meter premiums for flooring options
            flooring: {
                standard: 0,
                premium: 15,
                tiles: 40,
                hardwood: 80,
                laminate: 25,
                vinyl: 30
            },
            
            // Per square meter premiums for roof types
            roof: {
                concrete: 0,
                metal: 10,
                terracotta: 25,
                slate: 50,
                shingle: 5
            },
            
            // Percentage premiums for ceiling heights
            ceiling: {
                standard: 0,
                high: 5,
                vaulted: 12
            },
            
            // Per square meter costs for insulation levels
            insulation: {
                basic: 0,
                standard: 3,
                premium: 8,
                'high-performance': 15
            },

            // Energy Efficiency features costs
            energyEfficiency: {
                doubleGlazing: 50, // per sqm
                solarPanels: 8000,
                rainwaterHarvesting: 3000,
                smartThermostat: 800
            },
            
            // Fixed costs for heating systems
            heating: {
                none: 0,
                split: 3000,
                ducted: 8000,
                hydronic: 12000,
                geothermal: 20000
            },
            
            // Fixed costs for cooling systems
            cooling: {
                none: 0,
                split: 4000,
                ducted: 10000,
                evap: 6000,
                central: 15000
            },
            
            // Fixed costs for landscaping levels
            landscape: {
                none: 0,
                basic: 5000,
                premium: 15000,
                luxury: 30000
            },
            
            // Fixed costs for driveway types
            driveway: {
                gravel: 2000,
                asphalt: 4000,
                concrete: 6000,
                pavers: 8000,
                'exposed-aggregate': 10000
            },
            
            // Cost per square meter for concrete around the house
            concretePerSqm: 100,
            
            // Kitchen features
            cabinetMaterial: {
                laminate: 0,
                thermofoil: 1500,
                wood: 3000,
                painted: 2500
            },
            
            countertop: {
                laminate: 0,
                quartz: 2000,
                granite: 3500,
                marble: 4500
            },
            
            islandBench: 3000,
            pantry: 4000,
            breakfastBar: 1500,

            // Appliance packages
            appliances: {
                standard: 0,
                premium: 5000,
                luxury: 12000
            },
            
            // Bathroom features
            shower: {
                standard: 0,
                frameless: 800,
                'walk-in': 1200
            },
            
            vanity: {
                standard: 0,
                floating: 600,
                double: 1000
            },
            
            fullHeightTiles: 2000,
            heatedFloor: 3000,
            steamShower: 2500,
            freestandingBath: 1500,

            // Site works costs
            siteWorks: {
                excavation: 7000,
                drainage: 4000,
                serviceConnections: 10000,
                retainingWalls: 6000
            }
        };
        
        // Chart.js instance variable
        let costChart;

        // Function to initialize or update the Chart.js pie chart
        function initializeOrUpdateChart(chartData) {
            const ctx = document.getElementById('cost-chart').getContext('2d');

            // If chart instance already exists, destroy it before creating a new one
            if (costChart) {
                costChart.destroy();
            }

            costChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Structure', 'Roofing', 'Interiors', 'Kitchen & Bath', 'Systems', 'Exterior & Site'],
                    datasets: [{
                        data: chartData,
                        backgroundColor: [
                            '#2563eb', // Primary
                            '#3b82f6', // Lighter Primary
                            '#60a5fa', // Even Lighter Primary
                            '#93c5fd', // Lightest Primary
                            '#bfdbfe', // Very Light Primary
                            '#dbeafe'  // Pale Primary
                        ],
                        hoverOffset: 10,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                font: {
                                    size: 14
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += formatCurrency(context.parsed);
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Utility function to format numbers as currency (USD with no decimals)
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }
        
        // No custom selectOption or handleRadioChange needed for dropdowns.
        // The default HTML behavior and onchange listener on the select element will handle it.

        // Main function to calculate the cost estimate
        function calculateEstimate() {
            // Retrieve values from form inputs
            let totalAreaInput = parseFloat(document.getElementById('total-area').value) || 200;
            const areaUnit = document.querySelector('input[name="area-unit"]:checked').value;
            let totalArea = totalAreaInput;
            if (areaUnit === 'squares') {
                totalArea = totalAreaInput * 9.29; // Convert squares to sqm (1 square = 9.29 sqm)
            }
            
            const propertyType = document.getElementById('property-type').value;
            const floors = parseInt(document.getElementById('floors').value);
            const garage = parseInt(document.getElementById('garage').value);
            const buildingStyle = document.getElementById('building-style').value;
            const bedrooms = parseInt(document.getElementById('bedrooms').value) || 1;
            const bathrooms = parseInt(document.getElementById('bathrooms').value) || 1;
            const kitchens = parseInt(document.getElementById('kitchens').value) || 1;
            const livingAreas = parseInt(document.getElementById('living-areas').value) || 1;
            
            // Checkbox states for additional rooms
            const alfresco = document.getElementById('alfresco').checked;
            const theatre = document.getElementById('theatre').checked;
            const office = document.getElementById('office').checked;
            const prayer = document.getElementById('prayer').checked;
            const laundry = document.getElementById('laundry').checked;
            const study = document.getElementById('study').checked;
            const builtinWardrobes = document.getElementById('builtin-wardrobes').checked;
            
            // Selected material and system options
            const flooring = document.getElementById('flooring').value;
            const roof = document.getElementById('roof').value;
            const ceiling = document.getElementById('ceiling').value;
            const insulation = document.getElementById('insulation').value;
            const heating = document.getElementById('heating').value;
            const cooling = document.getElementById('cooling').value;
            const landscape = document.getElementById('landscape').value;
            const driveway = document.getElementById('driveway').value;
            
            // Energy Efficiency features
            const doubleGlazing = document.getElementById('double-glazing').checked;
            const solarPanels = document.getElementById('solar-panels').checked;
            const rainwaterHarvesting = document.getElementById('rainwater-harvesting').checked;
            const smartThermostat = document.getElementById('smart-thermostat').checked;
            
            // Kitchen features (now from dropdowns)
            const cabinetMaterial = document.getElementById('cabinet-material').value;
            const countertop = document.getElementById('countertop').value;
            const island = document.getElementById('island').checked; // Checkbox
            const pantry = document.getElementById('pantry').checked; // Checkbox
            const breakfastBar = document.getElementById('breakfast-bar').checked; // Checkbox
            const appliances = document.getElementById('appliances').value;
            
            // Bathroom features (now from dropdowns)
            const shower = document.getElementById('shower').value;
            const vanity = document.getElementById('vanity').value;
            const fullHeightTiles = document.getElementById('full-height-tiles').checked; // Checkbox
            const heatedFloor = document.getElementById('heated-floor').checked;       // Checkbox
            const steamShower = document.getElementById('steam-shower').checked;       // Checkbox
            const freestandingBath = document.getElementById('freestanding-bath').checked; // Checkbox

            // Site Works features
            const excavation = document.getElementById('excavation').checked;
            const drainage = document.getElementById('drainage').checked;
            const serviceConnections = document.getElementById('service-connections').checked;
            const retainingWalls = document.getElementById('retaining-walls').checked;
            
            // --- Core Cost Calculations ---
            
            // 1. Base Construction Cost
            let constructionCost = totalArea * marketRates.baseCostPerSqm * marketRates.buildingStyle[buildingStyle];
            
            // Apply property type discounts
            if (propertyType === 'townhouse') {
                constructionCost *= (1 - marketRates.townhouseDiscount);
            } else if (propertyType === 'apartment') {
                constructionCost *= (1 - marketRates.apartmentDiscount);
            }
            
            // Apply floor premiums
            if (floors === 2) {
                constructionCost *= (1 + marketRates.duplexPremium);
            } else if (floors >= 3) {
                constructionCost *= (1 + (marketRates.duplexPremium * 1.5));
            }
            
            // 2. Room Costs
            let roomCosts = 0;
            roomCosts += bedrooms * marketRates.bedroomCost;
            roomCosts += bathrooms * marketRates.bathroomCost;
            roomCosts += kitchens * marketRates.kitchenCost;
            roomCosts += livingAreas * marketRates.livingAreaCost;
            if (alfresco) roomCosts += marketRates.alfrescoCost;
            if (theatre) roomCosts += marketRates.theatreCost;
            if (office) roomCosts += marketRates.officeCost;
            if (prayer) roomCosts += marketRates.prayerRoomCost;
            if (laundry) roomCosts += marketRates.laundryCost;
            if (study) roomCosts += marketRates.studyCost;
            if (builtinWardrobes) roomCosts += marketRates.builtinWardrobe * bedrooms;
            
            // 3. Garage Cost
            let garageCost = 0;
            if (garage === 1) {
                garageCost = marketRates.singleGarage;
            } else if (garage === 2) {
                garageCost = marketRates.doubleGarage;
            } else if (garage >= 3) {
                garageCost = marketRates.tripleGarage;
            }
            
            // 4. Finishes & Materials Cost
            let finishesCost = 0;
            finishesCost += totalArea * marketRates.flooring[flooring];
            finishesCost += totalArea * marketRates.roof[roof];
            finishesCost += constructionCost * (marketRates.ceiling[ceiling] / 100);
            finishesCost += totalArea * marketRates.insulation[insulation];
            
            // 5. Systems & Utilities Cost
            let systemsCost = 0;
            systemsCost += marketRates.heating[heating];
            systemsCost += marketRates.cooling[cooling];
            
            // 6. Exterior & Landscape Cost (now includes site works)
            let exteriorCost = 0;
            exteriorCost += marketRates.landscape[landscape];
            exteriorCost += marketRates.driveway[driveway];
            exteriorCost += totalArea * 0.2 * marketRates.concretePerSqm;
            exteriorCost += garageCost;

            // Site Works costs
            if (excavation) exteriorCost += marketRates.siteWorks.excavation;
            if (drainage) exteriorCost += marketRates.siteWorks.drainage;
            if (serviceConnections) exteriorCost += marketRates.siteWorks.serviceConnections;
            if (retainingWalls) exteriorCost += marketRates.siteWorks.retainingWalls;
            
            // 7. Feature Costs (Kitchen, Bathroom, Energy Efficiency, Appliances)
            let featureCost = 0;
            
            // Kitchen features (from dropdowns and checkboxes)
            featureCost += kitchens * marketRates.cabinetMaterial[cabinetMaterial];
            featureCost += kitchens * marketRates.countertop[countertop];
            if (island) featureCost += marketRates.islandBench * kitchens;
            if (pantry) featureCost += marketRates.pantry * kitchens;
            if (breakfastBar) featureCost += marketRates.breakfastBar * kitchens;
            featureCost += kitchens * marketRates.appliances[appliances];

            // Bathroom features (from dropdowns and checkboxes)
            featureCost += bathrooms * marketRates.shower[shower];
            featureCost += bathrooms * marketRates.vanity[vanity];
            if (fullHeightTiles) featureCost += marketRates.fullHeightTiles * bathrooms;
            if (heatedFloor) featureCost += marketRates.heatedFloor * bathrooms;
            if (steamShower) featureCost += marketRates.steamShower * bathrooms;
            if (freestandingBath) featureCost += marketRates.freestandingBath * bathrooms;
            
            // Energy Efficiency features
            if (doubleGlazing) featureCost += totalArea * marketRates.energyEfficiency.doubleGlazing;
            if (solarPanels) featureCost += marketRates.energyEfficiency.solarPanels;
            if (rainwaterHarvesting) featureCost += marketRates.energyEfficiency.rainwaterHarvesting;
            if (smartThermostat) featureCost += marketRates.energyEfficiency.smartThermostat;
            
            // Calculate overall total cost
            const totalCost = constructionCost + roomCosts + finishesCost + systemsCost + exteriorCost + featureCost;
            const costPerSqm = totalCost / totalArea;
            
            // --- Breakdown for Chart and Progress Bars ---
            const structureBreakdownCost = constructionCost * 0.30;
            const roofingBreakdownCost = (constructionCost * 0.15) + (totalArea * marketRates.roof[roof]);
            const interiorsBreakdownCost = (constructionCost * 0.25) + (finishesCost * 0.6) + (roomCosts * 0.5);
            const kitchenBathBreakdownCost = (constructionCost * 0.15) + (roomCosts * 0.5) + (finishesCost * 0.4) + (featureCost * 0.7);
            const systemsBreakdownCost = (constructionCost * 0.10) + systemsCost;
            const exteriorBreakdownCost = (constructionCost * 0.05) + exteriorCost + (featureCost * 0.3);
            
            // Calculate the sum of the breakdown costs for percentage calculations
            const breakdownTotal = structureBreakdownCost + roofingBreakdownCost + interiorsBreakdownCost + 
                                   kitchenBathBreakdownCost + systemsBreakdownCost + exteriorBreakdownCost;

            // --- Update UI Elements ---
            
            // Update summary box
            document.getElementById('construction-cost').textContent = formatCurrency(constructionCost);
            document.getElementById('finishes-cost').textContent = formatCurrency(finishesCost);
            document.getElementById('systems-cost').textContent = formatCurrency(systemsCost);
            document.getElementById('exterior-cost').textContent = formatCurrency(exteriorCost);
            document.getElementById('features-cost').textContent = formatCurrency(featureCost);
            
            // Update total cost and cost per sqm
            document.getElementById('total-cost').textContent = formatCurrency(totalCost);
            document.getElementById('cost-per-sqm').textContent = formatCurrency(costPerSqm) + ' per sqm';
            
            // Update detailed cost breakdown with percentages and progress bars
            if (breakdownTotal > 0) {
                updateBreakdown('frame', structureBreakdownCost, breakdownTotal);
                updateBreakdown('roof', roofingBreakdownCost, breakdownTotal);
                updateBreakdown('interior', interiorsBreakdownCost, breakdownTotal);
                updateBreakdown('kitchen', kitchenBathBreakdownCost, breakdownTotal);
                updateBreakdown('utilities', systemsBreakdownCost, breakdownTotal);
                updateBreakdown('exterior', exteriorBreakdownCost, breakdownTotal);
            } else {
                // Reset to 0 if total is 0 to avoid division by zero errors
                updateBreakdown('frame', 0, 1);
                updateBreakdown('roof', 0, 1);
                updateBreakdown('interior', 0, 1);
                updateBreakdown('kitchen', 0, 1);
                updateBreakdown('utilities', 0, 1);
                updateBreakdown('exterior', 0, 1);
            }
            
            // Update the Chart.js pie chart with the new breakdown data
            initializeOrUpdateChart([
                Math.round(structureBreakdownCost),
                Math.round(roofingBreakdownCost),
                Math.round(interiorsBreakdownCost),
                Math.round(kitchenBathBreakdownCost),
                Math.round(systemsBreakdownCost),
                Math.round(exteriorBreakdownCost)
            ]);
        }
        
        // Helper function to update a single breakdown item
        function updateBreakdown(prefix, cost, total) {
            const percent = total > 0 ? Math.round((cost / total) * 100) : 0;
            document.getElementById(`${prefix}-percent`).textContent = `${percent}%`;
            document.getElementById(`${prefix}-cost`).textContent = formatCurrency(cost);
            document.getElementById(`${prefix}-progress`).style.width = `${percent}%`;
        }
        
        // Event listener for the "Calculate Estimate" button
        document.getElementById('calculate-btn').addEventListener('click', calculateEstimate);
        
        // Calculate the estimate when the page finishes loading to show initial values
        window.addEventListener('load', () => {
            // No custom logic needed for 'selected' class on dropdowns as they handle state natively.
            // For the area unit radio buttons, ensure the default checked option is visually active if needed.
            const initialAreaUnitRadio = document.querySelector('input[name="area-unit"]:checked');
            if (initialAreaUnitRadio) {
                initialAreaUnitRadio.closest('.toggle-option').classList.add('selected');
            }

            // Run initial calculation
            calculateEstimate();
        });

        // Add event listeners for radio buttons to apply 'selected' class visually
        // This is only for the "Area Units" section as others are now dropdowns
        document.querySelectorAll('input[name="area-unit"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.querySelectorAll('.toggle-option').forEach(option => {
                    option.classList.remove('selected');
                });
                this.closest('.toggle-option').classList.add('selected');
            });
        });

        // Trigger initial visual update for area unit radio buttons on load
        window.addEventListener('load', () => {
            const initialAreaUnitRadio = document.querySelector('input[name="area-unit"]:checked');
            if (initialAreaUnitRadio) {
                initialAreaUnitRadio.closest('.toggle-option').classList.add('selected');
            }
        });

    </script>
</body>
</html>